<!DOCTYPE html>
<html>

<head>

	<style>
		* {
			padding: 0;
			margin: 0;
		}
		
		canvas {
			background: gray;
			display: block;
			margin: 0 auto;
		}
	</style>

<title>Minesweeper</title>
</head>

<body>

	<canvas id="myCanvas" width="1350" height="650"></canvas>

	<body style="background-color:gray;">

		<SCRIPT LANGUAGE="JavaScript">
			
			
			var canvas = document.getElementById("myCanvas");
			var ctx = canvas.getContext("2d");
			
			var boardType = "square";  //square, hex
			
			var tile = [[]];
			
			var dificulty = 1;
			var boardSize = {x:50,y:30};
			
			var border = {x:20, y:20};
			var tileSize = 20;
			var tileBorder = 0.08; //fraction
			
			var index1 = 0;
			var index2 = 0;
			
			var index3 = 0; //adjacent checking
			var index4 = 0;
			
			var countMines = 0;
			
			
			
			if(boardType == "square"){
				for(index1 = 0;index1 < boardSize.x;index1++){
					tile[index1] = [];
					for(index2 = 0;index2 < boardSize.y;index2++){
						tile[index1][index2] = {
							mine:Math.random() < 0.5,
							flag:Math.random() < 0.5,
							open:Math.random() < 0.5
						}
					}
				}
			}
			
			
			
			
			
			function draw() {
				
				ctx.clearRect(0,0,canvas.width,canvas.height);
				
				window.oncontextmenu = function(){
					return false;
				}
				
				/*
				document.addEventListener("keydown", keyDownHandler, false);
				//document.addEventListener("keyup", keyUpHandler, false);
				
				function keyDownHandler(e) {
					
				}*/
				
				
				
				
				
				
				for(index1 = 0;index1 < boardSize.x;index1++){
					for(index2 = 0;index2 < boardSize.y;index2++){
						ctx.beginPath();
						ctx.fillStyle = tile[index1][index2].open ? "#AAAAAA" : "#CCCCCC";
						ctx.fillRect(border.x + index1*tileSize + tileSize*(tileBorder), border.y + index2*tileSize + tileSize*(tileBorder), tileSize*(1 - 2*tileBorder), tileSize*(1 - 2*tileBorder));
						ctx.closePath();
						
						if(tile[index1][index2].flag && !tile[index1][index2].open){
							ctx.beginPath();
							ctx.moveTo(border.x + index1*tileSize + tileSize/2, border.y + index2*tileSize + tileSize/5);
							ctx.lineTo(border.x + index1*tileSize + tileSize*1/4, border.y + index2*tileSize + tileSize*4/5);
							ctx.lineTo(border.x + index1*tileSize + tileSize*3/4, border.y + index2*tileSize + tileSize*4/5);
							ctx.lineTo(border.x + index1*tileSize + tileSize/2, border.y + index2*tileSize + tileSize/5);
							ctx.fillStyle = "Red";
							ctx.fill();
							ctx.closePath();
						}
					}
				}
				
				
				
				
				setTimeout(draw, 20);
			}    
			draw();
        		
   		 </SCRIPT>
	</body>
</html>
